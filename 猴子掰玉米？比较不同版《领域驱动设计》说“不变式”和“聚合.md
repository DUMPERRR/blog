因为要截几张图，又翻看了Eric Evans《领域驱动设计》的中译本，说一些感想。
《领域驱动设计》的中译本目前有这么几个。
2006年，清华大学出版社首先出了中译本（以下称“清华06版”）。这个版本虽然不是UMLChina译，但译稿经过了我们的审校，所以封面有“UMLChina特别推荐”的字样。

<img width="1080" height="1302" alt="image" src="https://github.com/user-attachments/assets/dccaa0ca-efe3-421c-9751-04f24c913d74" />

<img width="993" height="676" alt="image" src="https://github.com/user-attachments/assets/ab62575e-a7e4-4fec-ad2c-acf18bb87c31" />

2010年，人民邮电出版社重新翻译出版中译本（以下称“人邮10版”）。这个中译本的翻译和UMLChina无关。我们积极配合出版社做了大力宣传，所以UMLChina的图标出现在封底。

<img width="875" height="1078" alt="image" src="https://github.com/user-attachments/assets/38aa744e-3963-4a1c-a562-624be8cc78ef" />

<img width="959" height="697" alt="image" src="https://github.com/user-attachments/assets/cfa5acb2-0a1d-415a-947a-95e7d6601a44" />

<img width="982" height="1318" alt="image" src="https://github.com/user-attachments/assets/19fd411a-2e5e-4152-b602-f24dbb6aa1a2" />

2016年，人民邮电出版社将人邮10版本加了“审校”二字重新出版（以下称“人邮16版”）。人邮10版相对于清华06版，从48元涨到69元，但人邮16版却没涨，依然是69元，赞一个！可惜，“UMLChina”消失了。

<img width="857" height="1073" alt="image" src="https://github.com/user-attachments/assets/7e1a01e4-7fb5-4c4f-92eb-4d5ffc40d184" />

<img width="892" height="709" alt="image" src="https://github.com/user-attachments/assets/232e82ae-3a28-487a-b7fb-4a84584e1ca2" />

当然，不管中译本出了多少种，都是针对Eric Evans的2003英文版，原版目前为止并没有出新版。

<img width="1080" height="1410" alt="image" src="https://github.com/user-attachments/assets/93d86989-0b87-466a-bc12-308b7bc765f3" />

以往如果我需要看这本书，一般看原版或清华06版（严格来说，是电脑里出版前Word的译稿），之前并未仔细看过其他版本的中译本。人邮版的版式、字体和纸张都比清华06版更讲究，所以我一直自然而然地认为，译文也应该很讲究。
这次想做幻灯想要截几张书里的图，比如，针对这段原文：

<img width="1080" height="279" alt="image" src="https://github.com/user-attachments/assets/ff7a1f6c-0faa-464c-ba8b-f8bb8ad990e2" />

我找到人邮16版对应内容：

<img width="1080" height="273" alt="image" src="https://github.com/user-attachments/assets/c5d130b1-cbc7-452a-8af0-e10755256a39" />

红线是我画的。
人邮16版将invariant翻译为“固定规则”，其实这个词的翻译是“不变式”或“不变量”。像人邮出的下面这本书的翻译就是正确的：

<img width="1080" height="1357" alt="image" src="https://github.com/user-attachments/assets/1c5c3af5-2f9b-4736-bb20-e9f5027a5cb4" />

<img width="1080" height="216" alt="image" src="https://github.com/user-attachments/assets/0f654772-fed1-49a1-84ed-f378d9458753" />

<img width="1080" height="215" alt="image" src="https://github.com/user-attachments/assets/a45dde73-8777-493b-8cd4-89105752c45d" />

如果说译者觉得“不变式”不好，毅然决然抛开常用译法，一定要译为“固定规则”，也未尝不可，但再细究整句译文就可以发现，译者是对invariant的概念不理解，才导致了乱用词并且曲解了意思。

<img width="1080" height="81" alt="image" src="https://github.com/user-attachments/assets/1de96977-5c38-4c9f-8256-30b932144c1e" />

即使把“固定规则”替换成“不变式”也是错的。“满足所有不变式”？那这不变式是谁的？
其实不变式是对象的。
正确的意思应该是，（对象各成员）要满足对象的所有不变式，（聚合各成员）要满足聚合的所有不变式，而不是对象去满足不变式，聚合去满足不变式。（从这一点展开来说，聚合（aggregate）这个概念其实可以不要，聚合就是对象，对象就是聚合。以后不知道有没有人伪创新“聚合的聚合”，“中聚合”、“大聚合”、“超大聚合”。）
关于不变式，下面摘自Bertrand Meyer“Object-Oriented Software Construction（Second Edition）”的页面应该可以帮助理解：

<img width="382" height="500" alt="image" src="https://github.com/user-attachments/assets/4052f6df-9219-416d-9600-0cde603ec167" />

<img width="1080" height="1397" alt="image" src="https://github.com/user-attachments/assets/2e76d5de-97f3-4e8e-abcd-35272b08c37b" />

2005-2006年间，Meyer这本书的译稿（不是我译）纸质版在我手上放了半年多。收到机械工业出版社编辑老师寄过来的几公斤重的译稿时，还兴奋地专门发新闻说“中译本要出版了！”。结果，审稿进度缓慢，最后很惭愧地把译稿退还给了编辑（记不清到底退了没有？不要过几年在家里某个箱底看到）。直到现在，还没有出版社出版此书的中译本，以后应该也不会有了。

<img width="1080" height="539" alt="image" src="https://github.com/user-attachments/assets/51f7e1fd-1011-4afc-b5c6-3600c1d17b86" />

Bjarne Stroustrup（C++）也强调了不变式的重要（https://www.artima.com/intv/goldilocks.html#part3）：

<img width="1010" height="746" alt="image" src="https://github.com/user-attachments/assets/ec61ea85-e802-4ba0-a67b-8cc19163d1e3" />

人邮16版译文中额外加了个原文没有的“分门别类”，译者可能以为锦上添花一下也无妨，结果却又暴露了对概念的不理解，又把意思搞反了。

<img width="1080" height="70" alt="image" src="https://github.com/user-attachments/assets/476e65e1-fedc-494d-ad4b-585aed29eeaf" />

分门别类的意思归纳相同特征，相当于泛化，如下：

<img width="572" height="496" alt="image" src="https://github.com/user-attachments/assets/616e413d-08d2-430e-a072-4242a86c6b75" />

聚合却是把不同特征聚在一起，如下：

<img width="428" height="413" alt="image" src="https://github.com/user-attachments/assets/038cf977-5349-499d-b040-ecbbb83bdc60" />

<img width="428" height="406" alt="image" src="https://github.com/user-attachments/assets/40398f22-6b5d-4367-85a9-1fc9b98aba1c" />

对于研发部这个聚合，可以有不变式：鼓励师人数不得少于程序员和架构师人数之和。
对于鼓励师，也可以有不变式：年龄不超过25岁则重量不得超过50公斤；年龄不超过30岁则重量不得超过52公斤。
注意，人邮16版是以“审校”的名义重出的“第二版”，那是不是人邮10版更差呢？我又花心思找到了其他中译版本。以下是人邮10版的对应内容：

<img width="1080" height="239" alt="image" src="https://github.com/user-attachments/assets/3b9fe928-1d8d-4883-bf97-f46a072d48ae" />

人邮10版和人邮16版似乎一模一样，没看出“审校”在哪里。
清华06版的对应译文如下：

<img width="1080" height="210" alt="image" src="https://github.com/user-attachments/assets/26f05983-faf4-4e9e-99db-045ed451a656" />

如果不理解原文，可以打开清华06版，在此基础上“参考”并“发展”多好。如果每次“创新”或“更新”都像猴子掰玉米，掰一个丢一个，进步从何谈起？我们现在有很多原地踏步甚至是退步的“伪创新”，原因多是不了解也懒得花精力去了解前人的工作。
书中讲述的的另一个概念Value Objects，原文：

<img width="848" height="89" alt="image" src="https://github.com/user-attachments/assets/81c82cfe-33a0-49ff-93a8-e98b0bf94137" />

人邮16版出了一个错别字：

<img width="1080" height="152" alt="image" src="https://github.com/user-attachments/assets/3fe545f5-4bbe-4a6f-883c-812a3094f2ca" />

以下是人邮10版的对应内容：

<img width="1080" height="711" alt="image" src="https://github.com/user-attachments/assets/d5714b39-1a1d-4c35-92f6-17f8e594949f" />

可以看到，这个错误是人邮10版就有的。这个地方，人邮16版又是和人邮10版一模一样，也没有“审校”过来。
清华06版的对应译文如下：

<img width="1080" height="141" alt="image" src="https://github.com/user-attachments/assets/de6a7b1d-c16b-41b2-9396-702e847aab8e" />

至少没有错别字。
不过，大家都把some译成了“某种”……，莫非人邮译者也不是没有参考过清华06版？
我又想到，在“聚合”这一点上其他书有没有类似问题呢？我又翻开《实现领域驱动设计》，Vaughn Vernon 著，滕云 译，张逸 审，电子工业出版社。

<img width="862" height="524" alt="image" src="https://github.com/user-attachments/assets/47127096-5375-4070-b218-45778e0b4131" />

类似地方，同样有类似问题。
第10章一开头，原文：

<img width="1080" height="676" alt="image" src="https://github.com/user-attachments/assets/1f4b35ea-c64c-40c1-91c5-8434cba03ec9" />

译文：

<img width="1080" height="399" alt="image" src="https://github.com/user-attachments/assets/3249cecc-4378-4c6a-ab31-70051190c5c1" />

译者看到parent，误以为是“父类”，从而臆想出“对象树”这样的文字。
这不只是看走眼或者英语水平的问题，还有面向对象的基本概念不清楚的问题。
泛化和关联是面向对象的两种基本关系。
泛化表示集合关系，两个类形成泛化，意味着超类的对象集合包含了子类的对象集合，如下图：

<img width="1080" height="1166" alt="image" src="https://github.com/user-attachments/assets/33faf7e8-763f-4c56-8ccf-d0bfc4fb4bec" />

而关联表示个体关系，两个类形成关联，意味着一个类的对象个体组装了另一个类的对象个体，正是因为是个体，才有1对多，多对多等多重性。如下图：

<img width="1080" height="973" alt="image" src="https://github.com/user-attachments/assets/a63d1859-327e-4ca6-9d7f-668956b92768" />

例如，自然语言"人有男有女"说的是泛化关系。因为意思不是一个人的个体组装了若干男人个体和若干女人个体，而是说人的集合包含了男人的集合和女人的集合。但是，自然语言"人有手有脚"说的却是关联关系。因为意思不是人的集合和手、脚的集合有包含关系，而是说一个人的个体组装了若干手和脚的个体。您可以自行体会一下“人有车有房”和“人有高富帅有屌丝”的区别。
聚合实际上就是关联的一种，但Eric Evans选择这个词其实并不恰当，更恰当的词是组合（composition）。
我们来看刚才译者的翻译错在哪里。
首先，可能把聚合当成了泛化，所以有“父类”的说法。
其次，受“父类”的误导，又混淆了类和对象的概念，所以产生了“对象树”的说法。先不说原文本来就没有“树”的字眼，“对象树”的说法本身就是错的。
译者可能以为自己说的是这样的树：

<img width="674" height="719" alt="image" src="https://github.com/user-attachments/assets/18f6c36b-c4db-4d28-ba48-e834695388ed" />

但是这样的树代表的意思是：

<img width="1080" height="1296" alt="image" src="https://github.com/user-attachments/assets/eef2f374-bebf-4f95-983f-082ee81faa2b" />

这是“类（集合）”的树，不是“对象（个体）”的树。
原文用的词是graph，就是object graph的那个graph。这个啥意思，我想就不用多说了。
针对《实现领域驱动设计》的翻译错误，我还曾经写过一篇文章批评，《实现领域驱动设计》的翻译错误
